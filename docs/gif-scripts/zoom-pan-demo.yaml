# GIF Script: Zoom and Pan Demo
# Shows zooming in/out and panning around the layout, switching display modes
name: "Zoom Pan and Mode Switch Demo"
description: "Demonstrates zoom, pan, and switching between watts/volts display"
version: 1

settings:
  output: "docs/images/zoom-pan-demo.gif"
  width: 800
  height: 500
  fps: 15
  quality: high

setup:
  - description: "Start dashboard services"
    command: "cd dashboard && docker compose up -d"
    wait: 5000

actions:
  - type: navigate
    url: "http://localhost:5174"
    description: "Open dashboard"

  - type: wait
    duration: 1500
    description: "Wait for layout to load"

  # Zoom in using mouse wheel (simulated)
  - type: evaluate
    script: |
      // Simulate zoom in with ctrl+wheel
      const canvas = document.querySelector('[data-testid="layout-canvas"]') || document.querySelector('.layout-container');
      if (canvas) {
        for (let i = 0; i < 3; i++) {
          setTimeout(() => {
            canvas.dispatchEvent(new WheelEvent('wheel', {
              deltaY: -100,
              ctrlKey: true,
              bubbles: true
            }));
          }, i * 200);
        }
      }
    description: "Zoom in"

  - type: wait
    duration: 1000

  # Pan by dragging
  - type: drag
    from:
      selector: "[data-testid='layout-canvas'], .layout-container"
      offset: { x: 200, y: 150 }
      description: "Canvas center"
    to:
      offset: { x: -100, y: -80 }
      description: "Pan left and up"
    duration: 800
    description: "Pan the view"

  - type: wait
    duration: 600

  # Zoom out
  - type: evaluate
    script: |
      const canvas = document.querySelector('[data-testid="layout-canvas"]') || document.querySelector('.layout-container');
      if (canvas) {
        for (let i = 0; i < 2; i++) {
          setTimeout(() => {
            canvas.dispatchEvent(new WheelEvent('wheel', {
              deltaY: 100,
              ctrlKey: true,
              bubbles: true
            }));
          }, i * 200);
        }
      }
    description: "Zoom out"

  - type: wait
    duration: 800

  # Switch display mode to Volts
  - type: click
    selector: "[data-testid='display-mode-toggle'], [data-mode='volts']"
    description: "Switch to Volts view"

  - type: wait
    duration: 1000
    description: "Show volts display"

  # Switch to Serial Numbers
  - type: click
    selector: "[data-testid='display-mode-toggle'], [data-mode='serial']"
    description: "Switch to Serial view"

  - type: wait
    duration: 1000
    description: "Show serial numbers"

  # Switch back to Watts
  - type: click
    selector: "[data-testid='display-mode-toggle'], [data-mode='watts']"
    description: "Switch back to Watts"

  - type: wait
    duration: 800
