# TapTap-MQTT Configuration - Primary CCA
# Credentials are injected via environment variables at startup

[MQTT]
SERVER = ${MQTT_SERVER}
PORT = ${MQTT_PORT}
USER = ${MQTT_USER}
PASS = ${MQTT_PASS}
QOS = 1
TIMEOUT = 30

[TAPTAP]
LOG_LEVEL = info
BINARY = /usr/local/bin/taptap
SERIAL = /dev/ttyACM2
# WORKAROUND: ADDRESS must be present (even empty) due to taptap-mqtt.py validation bug
ADDRESS =
PORT = 502
# 42 panels across strings A-E (all modules must be on single comma-separated line)
MODULES = A:01:4-C3F23CR,A:02:4-C3F2ACK,A:03:4-C3F292X,A:04:4-C3F202N,A:05:4-C4744FK,A:06:4-C3F2C5N,A:07:4-C3F2C9H,A:08:4-C3F208V,B:01:4-C3F290V,B:02:4-C3F1ACH,B:03:4-C3F282R,B:04:4-C3F2CCY,B:05:4-C3F2CBP,B:06:4-C3F231W,B:07:4-C3F2AEM,B:08:4-C3F2CDX,B:09:4-C3F277H,B:10:4-C3F223Z,C:01:4-C3F2ABT,C:02:4-C3F1BFH,C:03:4-C3F211N,C:04:4-C3F2A5V,C:05:4-C3F269M,C:06:4-C3F243J,C:07:4-C3F244V,C:08:4-C3F247Y,D:01:4-C3F20AX,D:02:4-C3F1F0L,D:03:4-C3F2B8T,D:04:4-C3F2C8J,D:05:4-C3F152N,D:06:4-C3F2CAL,D:07:4-C3F222W,D:08:4-C3F2B9S,E:01:4-C3F1B5W,E:02:4-C3F1F5V,E:03:4-C3F162S,E:04:4-C3F264H,E:05:4-C3F254Y,E:06:4-C3F474G,E:07:4-C47478M,E:08:4-C3EF88G
TOPIC_PREFIX = taptap
TOPIC_NAME = primary
TIMEOUT = 300
UPDATE = 60
STATE_FILE = /data/taptap.state

[HA]
DISCOVERY_PREFIX = homeassistant
DISCOVERY_LEGACY = false
BIRTH_TOPIC = homeassistant/status
NODES_AVAILABILITY_ONLINE = true
NODES_AVAILABILITY_IDENTIFIED = true
STRINGS_AVAILABILITY_ONLINE = true
STRINGS_AVAILABILITY_IDENTIFIED = true
STATS_AVAILABILITY_ONLINE = true
STATS_AVAILABILITY_IDENTIFIED = true
NODES_SENSORS_RECORDER = energy
STRINGS_SENSORS_RECORDER = energy_daily
STATS_SENSORS_RECORDER = energy_daily

[RUNTIME]
MAX_ERROR = 15
RUN_FILE = /run/taptap/taptap.run
