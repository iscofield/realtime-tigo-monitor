# TapTap-MQTT Configuration - Primary CCA
# Credentials are injected via environment variables at startup

[MQTT]
SERVER = ${MQTT_SERVER}
PORT = ${MQTT_PORT}
USER = ${MQTT_USER}
PASS = ${MQTT_PASS}
QOS = 1
TIMEOUT = 30

[TAPTAP]
LOG_LEVEL = info
BINARY = /usr/local/bin/taptap
SERIAL = /dev/ttyACM2
# WORKAROUND: ADDRESS must be present (even empty) due to taptap-mqtt.py validation bug
ADDRESS =
PORT = 502
# 42 panels across strings A-E (all modules must be on single comma-separated line)
MODULES = A:1:4-C3F23CR,A:2:4-C3F2ACK,A:3:4-C3F292X,A:4:4-C3F202N,A:5:4-C4744FK,A:6:4-C3F2C5N,A:7:4-C3F2C9H,A:8:4-C3F208V,B:1:4-C3F290V,B:2:4-C3F1ACH,B:3:4-C3F282R,B:4:4-C3F2CCY,B:5:4-C3F2CBP,B:6:4-C3F231W,B:7:4-C3F2AEM,B:8:4-C3F2CDX,B:9:4-C3F277H,B:10:4-C3F223Z,C:1:4-C3F2ABT,C:2:4-C3F1BFH,C:3:4-C3F211N,C:4:4-C3F2A5V,C:5:4-C3F269M,C:6:4-C3F243J,C:7:4-C3F244V,C:8:4-C3F247Y,D:1:4-C3F20AX,D:2:4-C3F1F0L,D:3:4-C3F2B8T,D:4:4-C3F2C8J,D:5:4-C3F152N,D:6:4-C3F2CAL,D:7:4-C3F222W,D:8:4-C3F2B9S,E:1:4-C3F1B5W,E:2:4-C3F1F5V,E:3:4-C3F162S,E:4:4-C3F264H,E:5:4-C3F254Y,E:6:4-C3F474G,E:7:4-C47478M,E:8:4-C3EF88G
TOPIC_PREFIX = taptap
TOPIC_NAME = primary
TIMEOUT = 300
UPDATE = 60
STATE_FILE = /data/taptap.state

[HA]
DISCOVERY_PREFIX = homeassistant
DISCOVERY_LEGACY = false
BIRTH_TOPIC = homeassistant/status
NODES_AVAILABILITY_ONLINE = true
NODES_AVAILABILITY_IDENTIFIED = true
STRINGS_AVAILABILITY_ONLINE = true
STRINGS_AVAILABILITY_IDENTIFIED = true
STATS_AVAILABILITY_ONLINE = true
STATS_AVAILABILITY_IDENTIFIED = true
NODES_SENSORS_RECORDER = energy
STRINGS_SENSORS_RECORDER = energy_daily
STATS_SENSORS_RECORDER = energy_daily

[RUNTIME]
MAX_ERROR = 15
RUN_FILE = /run/taptap/taptap.run
